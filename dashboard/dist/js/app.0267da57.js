(function(t){function e(e){for(var a,n,i=e[0],l=e[1],c=e[2],d=0,m=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&m.push(s[n][0]),s[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,i=1;i<r.length;i++){var l=r[i];0!==s[l]&&(a=!1)}a&&(o.splice(e--,1),t=n(n.s=r[0]))}return t}var a={},s={app:0},o=[];function n(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=a,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var a=r("f195"),s=r.n(a);s.a},"060a":function(t,e,r){t.exports=r.p+"img/alipay.e872ea78.png"},"0c3e":function(t,e){},"22d2":function(t,e,r){},"3d2c":function(t,e,r){},"470c":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("img",{attrs:{src:r("cf05")}}),a("div",[a("p",[t._v(" Monibuca æ˜¯ä¸€ä¸ªå¼€æºçš„Goè¯­è¨€å®ç°çš„æµåª’ä½“æœåŠ¡å™¨å¼€å‘æ¡†æ¶ ")]),a("Button",{attrs:{type:"success",to:"/docs",target:"_blank"}},[t._v("ğŸš€START")]),a("span",{staticStyle:{margin:"0 10px"}}),a("Button",{attrs:{type:"default",target:"_blank",to:"https://github.com/langhuihui/monibuca"}},[a("svg",{staticStyle:{"vertical-align":"text-top"},attrs:{width:"16",height:"16","aria-labelledby":"simpleicons-github-dark-icon",lang:"",role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[a("title",{attrs:{id:"simpleicons-github-dark-icon",lang:"en"}},[t._v("GitHub Dark icon")]),a("path",{attrs:{fill:"#7F8C8D",d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}})]),t._v(" GITHUB")])],1),a("Row",{staticStyle:{margin:"30px"}},[a("Col",{attrs:{span:"8"}},[a("Card",{staticStyle:{margin:"30px"},attrs:{bordered:!1}},[a("div",{staticClass:"feature-title",attrs:{slot:"title"},slot:"title"},[t._v("âš¡é«˜æ€§èƒ½")]),a("div",[t._v("é’ˆå¯¹æµåª’ä½“æœåŠ¡å™¨ç‹¬ç‰¹çš„æ€§è´¨è¿›è¡Œçš„ä¼˜åŒ–ï¼Œå……åˆ†åˆ©ç”¨Golangçš„goroutineçš„æ€§è´¨å¯¹å¤§é‡çš„è¿æ¥çš„è¯»å†™è¿›è¡Œåˆç†çš„åˆ†é…è®¡ç®—èµ„æºï¼Œä»¥åŠå°½å¯èƒ½çš„å‡å°‘å†…å­˜Copyæ“ä½œã€‚ä½¿ç”¨å¯¹è±¡æ± å‡å°‘Golangçš„GCæ—¶é—´ã€‚")])])],1),a("Col",{attrs:{span:"8"}},[a("Card",{staticStyle:{margin:"30px"},attrs:{bordered:!1}},[a("div",{staticClass:"feature-title",attrs:{slot:"title"},slot:"title"},[t._v("ğŸ”§å¯æ‰©å±•")]),a("div",[t._v("æµåª’ä½“æœåŠ¡å™¨çš„ä¸ªæ€§åŒ–å®šåˆ¶å˜çš„æ›´ç®€å•ï¼ŒåŸºäºGolangè¯­è¨€ï¼Œå¼€å‘æ•ˆç‡æ›´é«˜ï¼Œç‹¬åˆ›çš„æ’ä»¶æœºåˆ¶ï¼Œå¯ä»¥æ–¹ä¾¿ç”¨æˆ·å®šåˆ¶ä¸ªæ€§åŒ–çš„åŠŸèƒ½ç»„åˆï¼Œæ›´é«˜æ•ˆç‡çš„åˆ©ç”¨æœåŠ¡å™¨èµ„æºã€‚")])])],1),a("Col",{attrs:{span:"8"}},[a("Card",{staticStyle:{margin:"30px"},attrs:{bordered:!1}},[a("div",{staticClass:"feature-title",attrs:{slot:"title"},slot:"title"},[t._v("ğŸ“ˆå¯è§†åŒ–")]),a("div",[t._v("åŠŸèƒ½å¼ºå¤§çš„ä»ªè¡¨ç›˜å¯ä»¥ç›´è§‚çš„çœ‹åˆ°æœåŠ¡å™¨è¿è¡Œçš„çŠ¶æ€ã€æ¶ˆè€—çš„èµ„æºã€ä»¥åŠå…¶ä»–ç»Ÿè®¡ä¿¡æ¯ã€‚ç”¨æˆ·å¯ä»¥åˆ©ç”¨æ§åˆ¶å°å¯¹æœåŠ¡å™¨è¿›è¡Œé…ç½®å’Œæ§åˆ¶ã€‚ç‚¹å‡»å³ä¸Šè§’èœå•æ é‡Œé¢çš„æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°æ¼”ç¤ºã€‚")])])],1)],1)],1)},s=[];r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return s}))},"56d7":function(t,e,r){"use strict";r.r(e);var a=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",[t._v("Monibuca")]),r("Menu",{staticStyle:{position:"absolute",top:"0",right:"0"},attrs:{mode:"horizontal","active-name":t.selectedMenu}},[r("MenuItem",{attrs:{name:"home",to:"/"}},[t._v("é¦–é¡µ")]),r("MenuItem",{attrs:{name:"docs",to:"/docs",target:"_blank"}},[t._v("æ–‡æ¡£")]),r("MenuItem",{attrs:{name:"console",to:"console"}},[t._v("æ§åˆ¶å°")]),r("Submenu",{attrs:{name:"plugins"}},[r("template",{slot:"title"},[t._v("å†…ç½®æ’ä»¶")]),r("MenuGroup",{attrs:{title:"å‘å¸ƒè€…/è®¢é˜…è€…"}},[r("MenuItem",{attrs:{name:"cluster",target:"_blank",to:"/docs/plugins.html#clusteræ’ä»¶"}},[t._v("é›†ç¾¤")]),r("MenuItem",{attrs:{name:"rtmp",target:"_blank",to:"/docs/plugins.html#rtmpæ’ä»¶"}},[t._v("RTMP")])],1),r("MenuGroup",{attrs:{title:"è®¢é˜…è€…"}},[r("MenuItem",{attrs:{name:"jessica",target:"_blank",to:"/docs/plugins.html#jessicaæ’ä»¶"}},[t._v("Jessica")]),r("MenuItem",{attrs:{name:"HDL",target:"_blank",to:"/docs/plugins.html#http-flvæ’ä»¶"}},[t._v("Http-Flv")]),r("MenuItem",{attrs:{name:"record",target:"_blank",to:"/docs/plugins.html#recordflvæ’ä»¶"}},[t._v("å½•åˆ¶Flv")])],1),r("MenuGroup",{attrs:{title:"å‘å¸ƒè€…"}},[r("MenuItem",{attrs:{name:"HLS",target:"_blank",to:"/docs/plugins.html#hlsæ’ä»¶"}},[t._v("HLS")]),r("MenuItem",{attrs:{name:"TS",target:"_blank",to:"/docs/plugins.html#hlsæ’ä»¶"}},[t._v("TS")])],1),r("MenuGroup",{attrs:{title:"é’©å­"}},[r("MenuItem",{attrs:{name:"Auth",target:"_blank",to:"/docs/plugins.html#æ ¡éªŒæ’ä»¶"}},[t._v("éªŒè¯")]),r("MenuItem",{attrs:{name:"QoS"}},[t._v("QoS")]),r("MenuItem",{attrs:{name:"gateway",target:"_blank",to:"/docs/plugins.html#ç½‘å…³æ’ä»¶"}},[t._v("ç½‘å…³")])],1)],2),r("MenuItem",{attrs:{name:"4",to:"about"}},[t._v("æ”¯æŒ")])],1),r("router-view",{staticClass:"content"}),r("div",[t._v("Copyright Â© 2019-2020 dexter è‹ICPå¤‡20001212å·")])],1)},o=[],n={name:"app",data(){return{selectedMenu:"home"}}},i=n,l=(r("034f"),r("2877")),c=Object(l["a"])(i,s,o,!1,null,null,null),u=c.exports,d=r("8c4f"),m=r("bb51"),p=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[a("h1",[t._v(" èµåŠ© Monibuca çš„ç ”å‘ ")]),a("p",[t._v(" Monibuca æ˜¯é‡‡ç”¨ MIT è®¸å¯çš„å¼€æºé¡¹ç›®ï¼Œä½¿ç”¨å®Œå…¨å…è´¹ã€‚ ä½†æ˜¯éšç€é¡¹ç›®è§„æ¨¡çš„å¢é•¿ï¼Œä¹Ÿéœ€è¦æœ‰ç›¸åº”çš„èµ„é‡‘æ”¯æŒæ‰èƒ½æŒç»­é¡¹ç›®çš„ç»´æŠ¤çš„å¼€å‘ã€‚ä½ å¯ä»¥é€šè¿‡ä¸‹åˆ—çš„æ–¹æ³•æ¥èµåŠ© Monibuca çš„å¼€å‘ã€‚ ")]),a("img",{attrs:{src:r("060a")}}),a("img",{attrs:{src:r("e660")}})])}],h=(r("5775"),{}),g=Object(l["a"])(h,p,f,!1,null,"e34eab40",null),b=g.exports,v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"text-align":"left"}},[r("Tabs",{on:{"on-click":t.onChangeTab},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[r("TabPane",{attrs:{label:"ç›´æ’­æµ",icon:"md-videocam"}},[r("div",{staticClass:"layout"},[t._l(t.Rooms,(function(e){return r("Card",{key:e.StreamPath,staticClass:"room"},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.typeMap[e.Type]||e.Type)+t._s(e.StreamPath))]),r("StartTime",{attrs:{slot:"extra",value:e.StartTime},slot:"extra"}),r("p",[t._v(" "+t._s(t.SoundFormat(e.AudioInfo.SoundFormat))+" "+t._s(e.AudioInfo.PacketCount)+" "+t._s(t.SoundRate(e.AudioInfo.SoundRate))+" å£°é“:"+t._s(e.AudioInfo.SoundType)+" ")]),r("p",[t._v(" "+t._s(t.CodecID(e.VideoInfo.CodecID))+" "+t._s(e.VideoInfo.PacketCount)+" "+t._s(e.VideoInfo.SPSInfo.Width)+"x"+t._s(e.VideoInfo.SPSInfo.Height)+" ")]),r("ButtonGroup",{attrs:{size:"small"}},[r("Button",{attrs:{icon:"ios-people"},on:{click:function(r){return t.onShowDetail(e)}}},[t._v(t._s(t.getSubscriberCount(e)))]),e.Type?r("Button",{attrs:{icon:"md-eye"},on:{click:function(r){return t.preview(e)}}}):t._e(),t.isRecording(e)?r("Button",{staticClass:"recording",attrs:{icon:"ios-radio-button-on"},on:{click:function(r){return t.stopRecord(e)}}}):r("Button",{attrs:{icon:"ios-radio-button-on"},on:{click:function(r){return t.record(e)}}})],1)],1)})),0==t.Rooms.length?r("div",{staticClass:"empty"},[r("Icon",{attrs:{type:"md-wine",size:"50"}}),t._v("æ²¡æœ‰ä»»ä½•æˆ¿é—´ ")],1):t._e()],2)]),r("TabPane",{attrs:{label:"é›†ç¾¤æ€»è§ˆ",icon:"ios-cloud"}},[r("Cluster")],1),r("TabPane",{attrs:{label:"å½•åˆ¶çš„è§†é¢‘",icon:"ios-folder",name:"recordsPanel"}},[r("Records",{ref:"recordsPanel"})],1),r("TabPane",{attrs:{label:"æ—¥å¿—è·Ÿè¸ª",icon:"md-bug"}},[r("Logs")],1),r("TabPane",{attrs:{label:"æŸ¥çœ‹é…ç½®",icon:"md-settings",name:"configPanel"}},[r("Config",{ref:"configPanel"})],1)],1),r("div",{staticClass:"status"},[r("Alert",[t._v("å¸¦å®½æ¶ˆè€— ğŸ“¥ï¼š"+t._s(t.totalInNetSpeed)+" ğŸ“¤ï¼š"+t._s(t.totalOutNetSpeed))]),r("Alert",{attrs:{type:t.memoryStatus}},[t._v("å†…å­˜ä½¿ç”¨ï¼š"+t._s(t.networkFormat(t.Memory.Used,"M"))+" å æ¯”ï¼š"+t._s(t.Memory.Usage.toFixed(2))+"%")]),r("Alert",{attrs:{type:t.cpuStatus}},[t._v("CPUä½¿ç”¨ï¼š"+t._s(t.CPUUsage.toFixed(2))+"%")]),r("Alert",{attrs:{type:t.hardDiskStatus}},[t._v("ç£ç›˜ä½¿ç”¨ï¼š"+t._s(t.networkFormat(t.HardDisk.Used,"M"))+" å æ¯”ï¼š"+t._s(t.HardDisk.Usage.toFixed(2))+"%")])],1),r("Jessibuca",{ref:"jessibuca",model:{value:t.showPreview,callback:function(e){t.showPreview=e},expression:"showPreview"}}),r("Subscribers",{attrs:{data:t.currentStream&&t.currentStream.SubscriberInfo},model:{value:t.showSubscribers,callback:function(e){t.showSubscribers=e},expression:"showSubscribers"}})],1)},S=[],_=r("2f62"),y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",t._g(t._b({attrs:{draggable:"",title:t.url},on:{"on-ok":t.onClosePreview,"on-cancel":t.onClosePreview}},"Modal",t.$attrs,!1),t.$listeners),[r("canvas",{staticStyle:{background:"black"},attrs:{id:"canvas",width:"488",height:"275"}}),r("div",{attrs:{slot:"footer"},slot:"footer"},[t.audioEnabled?r("Button",{attrs:{icon:"md-volume-off"},on:{click:t.turnOff}}):r("Button",{attrs:{icon:"md-volume-up"},on:{click:t.turnOn}})],1)])},w=[];let P=null;var C={name:"Jessibuca",data(){return{audioEnabled:!1,url:""}},watch:{audioEnabled(t){P.audioEnabled(t)}},mounted(){P=new window.Jessibuca({canvas:document.getElementById("canvas"),decoder:"jessibuca/ff.js"})},destroyed(){this.onClosePreview(),P.destroy()},methods:{play(t){this.url=t,P.play(t)},onClosePreview(){P.close()},turnOn(){this.audioEnabled=!0},turnOff(){this.audioEnabled=!1}}},M=C,k=Object(l["a"])(M,y,w,!1,null,null,null),x=k.exports,I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Poptip",{attrs:{trigger:"hover",content:"âŒšï¸"+new Date(t.value).toLocaleString()}},[r("Time",{attrs:{time:new Date(t.value)}})],1)},T=[],j={name:"StartTime",props:{value:String}},O=j,$=Object(l["a"])(O,I,T,!1,null,"062b9730",null),U=$.exports,F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"records"},t._l(t.data,(function(e){return r("Card",{key:e},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.Path))]),r("div",{attrs:{slot:"extra"},slot:"extra"},[r("Button",{attrs:{icon:"md-play",size:"small"},on:{click:function(r){return t.play(e)}}}),r("Button",{attrs:{icon:"ios-trash",size:"small"},on:{click:function(r){return t.deleteFlv(e)}}})],1),t._v(" "+t._s(t.toSizeStr(e.Size))+" "+t._s(t.toDurationStr(e.Duration))+" ")])})),1)},D=[];const R={"":"K",K:"M",M:"G",G:null};var E={data(){return{data:[]}},methods:{play(t){window.ajax.get("//"+location.host+"/api/record/flv/play",{streamPath:t.Path.replace(".flv","")},t=>{"success"==t?(this.onVisible(!0),this.$Message.success("åˆ é™¤æˆåŠŸ")):this.$Message.error(t)})},deleteFlv(t){this.$Modal.confirm({title:"æç¤º",content:"<p>æ˜¯å¦åˆ é™¤Flvæ–‡ä»¶</p>",onOk:()=>{window.ajax.get("//"+location.host+"/api/record/flv/delete",{streamPath:t.Path.replace(".flv","")},t=>{"success"==t?this.$Message.success("å¼€å§‹å‘å¸ƒ"):this.$Message.error(t)})},onCancel:()=>{}})},toSizeStr(t,e=""){return t>1024&&R[e]?this.toSizeStr(t/1024,R[e]):t.toFixed(2).replace(".00","")+e+"B"},toDurationStr(t){if(t>1e3){let e=t/1e3;if(e>60){e|=0;let t=e/60>>0;if(t>60){let e=t/60>>0;return e+"hour"+t%60+"min"}return t+"min"+e%60+"s"}return e.toFixed(3)+"s"}return t+"ms"},onVisible(t){t&&window.ajax.getJSON("//"+location.host+"/api/record/flv/list",{},t=>{this.data=t})}}},A=E,G=(r("e74f"),Object(l["a"])(A,F,D,!1,null,"4eee1624",null)),H=G.exports,B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{padding:"0 15px"}},[r("div",[t._v(" è‡ªåŠ¨æ»šåŠ¨ "),r("i-switch",{model:{value:t.autoScroll,callback:function(e){t.autoScroll=e},expression:"autoScroll"}})],1),r("div",{ref:"logContainer",staticClass:"log-container"},[r("pre",[t._l(t.$store.state.logs,(function(e){return[t._v(t._s(e+"\n"))]}))],2)])])},L=[],N={data(){return{autoScroll:!0}},mounted(){this.fetchLogs()},destroyed(){this.stopFetchLogs()},methods:{...Object(_["b"])(["fetchLogs","stopFetchLogs"])},updated(){this.autoScroll&&(this.$refs.logContainer.scrollTop=this.$refs.logContainer.offsetHeight)}},z=N,V=(r("ac96"),Object(l["a"])(z,B,L,!1,null,null,null)),J=V.exports,W=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{padding:"0 15px"}},[r("pre",[t._v(t._s(t.config))])])},K=[],Q={data(){return{config:""}},methods:{onVisible(t){t&&window.ajax.get("//"+location.host+"/api/config",{},t=>this.config=t)}}},q=Q,X=Object(l["a"])(q,W,K,!1,null,null,null),Y=X.exports,Z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",t._g(t._b({attrs:{draggable:"",title:"æŸ¥çœ‹è®¢é˜…è€…"}},"Modal",t.$attrs,!1),t.$listeners),[r("Table",{attrs:{columns:t.subtableColumns,data:t.data}})],1)},tt=[],et={props:{data:Array},data(){return{subtableColumns:[{title:"ç±»å‹",key:"Type"},{title:"Name",key:"ID"},{title:"è®¢é˜…æ—¶é—´",render(t,{row:e}){return t("StartTime",{props:{value:e.SubscribeTime}})}},{title:"ä¸¢å¸§",render(t,{row:e}){return t("span",e.TotalPacket?e.TotalDrop+"/"+e.TotalPacket:"")}},{title:"Buffer",render(t,{row:e}){return t("Progress",{props:{percent:Math.floor(99*e.BufferLength/1024),"text-inside":!0,"stroke-width":20,"stroke-color":["#87d068","#ff0000"]}})}}]}}},rt=et,at=Object(l["a"])(rt,Z,tt,!1,null,null,null),st=at.exports,ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"mountNode"}})},nt=[],it=r("07cd"),lt=r.n(it),ct=null,ut={computed:{...Object(_["c"])({data(t){let e=t.summary,r=[],a=[];return this.addServer(e,r,a),{nodes:r,edges:a}}})},methods:{addServer(t,e,r){let a={id:t.Address,label:t.Address,description:`cpu:${t.CPUUsage>>0}% mem:${t.Memory.Usage>>0}%`,shape:"modelRect",logoIcon:{show:!1}};if(e.push(a),t.Rooms)for(let s=0;s<t.Rooms.length;s++){let o=t.Rooms[s],n=a.id+o.StreamPath;if(e.push({id:n,label:o.StreamPath,shape:"rect"}),r.push({source:a.id,target:n}),o.SubscriberInfo)for(let t=0;t<o.SubscriberInfo.length;t++){let a=n+o.SubscriberInfo[t].ID;e.push({id:a,label:o.SubscriberInfo[t].ID}),r.push({source:n,target:a})}}if(t.Children)for(let s in t.Children)this.addServer(t.Children[s],e,r),r.push({source:a.id,target:s})}},watch:{data(t){ct&&ct.read(t)}},mounted(){ct=new lt.a.Graph({renderer:"svg",container:"mountNode",width:800,height:500,layout:{type:"radial"},defaultNode:{}}),ct.read(this.data)}},dt=ut,mt=Object(l["a"])(dt,ot,nt,!1,null,null,null),pt=mt.exports;const ft={"":"K",K:"M",M:"G",G:null},ht={0:"Linear PCM, platform endian",1:"ADPCM",2:"MP3",3:"Linear PCM, little endian",4:"Nellymoser 16kHz mono",5:"Nellymoser 8kHz mono",6:"Nellymoser",7:"G.711 A-law logarithmic PCM",8:"G.711 mu-law logarithmic PCM",9:"reserved",10:"AAC",11:"Speex",14:"MP3 8Khz",15:"Device-specific sound"},gt={1:"JPEG (currently unused)",2:"Sorenson H.263",3:"Screen video",4:"On2 VP6",5:"On2 VP6 with alpha channel",6:"Screen video version 2",7:"AVC",12:"H265"};var bt={name:"Console",components:{Jessibuca:x,StartTime:U,Records:H,Logs:J,Subscribers:st,Config:Y,Cluster:pt},data(){return{showPreview:!1,showSubscribers:!1,currentTab:"",currentStream:[],typeMap:{FlvFile:"ğŸ¥",TS:"ğŸ¬",HLS:"ğŸ","":"â³",Match365:"ğŸ†",RTMP:"ğŸš "}}},computed:{...Object(_["c"])({Rooms:t=>t.summary.Rooms||[],Memory:t=>t.summary.Memory,CPUUsage:t=>t.summary.CPUUsage,HardDisk:t=>t.summary.HardDisk,cpuStatus:t=>t.summary.CPUUsage>99?"error":t.summary.CPUUsage>50?"warning":"success",memoryStatus(t){return t.summary.CPUUsage>99?"error":t.summary.CPUUsage>50?"warning":"success"},hardDiskStatus(t){return t.summary.CPUUsage>99?"error":t.summary.CPUUsage>50?"warning":"success"},totalInNetSpeed(t){return this.networkFormat(t.summary.NetWork?t.summary.NetWork.reduce((t,e)=>t+e.ReceiveSpeed,0):0)+"/S"},totalOutNetSpeed(t){return this.networkFormat(t.summary.NetWork?t.summary.NetWork.reduce((t,e)=>t+e.SentSpeed,0):0)+"/S"}})},methods:{...Object(_["b"])(["fetchSummary","stopFetchSummary"]),getSubscriberCount(t){return this.currentStream&&this.currentStream.StreamPath==t.StreamPath&&(this.currentStream=t),t.SubscriberInfo?t.SubscriberInfo.length:0},preview(t){this.$refs.jessibuca.play("ws://"+location.hostname+":8080/"+t.StreamPath),this.showPreview=!0},onShowDetail(t){this.showSubscribers=!0,this.currentStream=t},networkFormat(t,e=""){return t>1024&&ft[e]?this.networkFormat(t/1024,ft[e]):t.toFixed(2).replace(".00","")+e+"B"},SoundFormat(t){return ht[t]},CodecID(t){return gt[t]},SoundRate(t){return t>1e3?t/1e3+"kHz":t+"Hz"},record(t){this.$Modal.confirm({title:"æç¤º",content:"<p>æ˜¯å¦ä½¿ç”¨è¿½åŠ æ¨¡å¼</p><small>é€‰æ‹©å–æ¶ˆå°†è¦†ç›–å·²æœ‰æ–‡ä»¶</small>",onOk:()=>{window.ajax.get("//"+location.host+"/api/record/flv?append=true",{streamPath:t.StreamPath},t=>{"success"==t?this.$Message.success("å¼€å§‹å½•åˆ¶(è¿½åŠ æ¨¡å¼)"):this.$Message.error(t)})},onCancel:()=>{window.ajax.get("//"+location.host+"/api/record/flv",{streamPath:t.StreamPath},t=>{"success"==t?this.$Message.success("å¼€å§‹å½•åˆ¶"):this.$Message.error(t)})}})},stopRecord(t){window.ajax.get("//"+location.host+"/api/record/flv/stop",{streamPath:t.StreamPath},t=>{"success"==t?this.$Message.success("åœæ­¢å½•åˆ¶"):this.$Message.error(t)})},isRecording(t){return t.SubscriberInfo&&t.SubscriberInfo.find(t=>"FlvRecord"==t.Type)},onChangeTab(t){switch(t){case"recordsPanel":this.$refs.recordsPanel.onVisible(!0);break;case"configPanel":this.$refs.configPanel.onVisible(!0)}}},mounted(){this.fetchSummary()},destroyed(){this.stopFetchSummary()}},vt=bt,St=(r("9756"),Object(l["a"])(vt,v,S,!1,null,"f6113870",null)),_t=St.exports;a["default"].use(d["a"]);const yt=[{path:"/",name:"home",component:m["default"]},{path:"/about",name:"about",component:b},{path:"/console",name:"console",component:_t}],wt=new d["a"]({mode:"history",base:"/",routes:yt});var Pt=wt;a["default"].use(_["a"]);let Ct=null,Mt=null;var kt=new _["a"].Store({state:{summary:{Address:location.hostname,NetWork:[],Rooms:[],Memory:{Used:0,Usage:0},CPUUsage:0,HardDisk:{Used:0,Usage:0},Children:{}},logs:[]},mutations:{update(t,e){Object.assign(t,e)},addLog(t,e){t.logs.push(e)}},actions:{fetchSummary({commit:t}){Ct=new EventSource("//"+location.host+"/api/summary"),Ct.onmessage=e=>{if(!e.data)return;let r=JSON.parse(e.data);r.Address=location.hostname,t("update",{summary:r})}},fetchLogs({commit:t}){Mt=new EventSource("//"+location.host+"/api/logs"),Mt.onmessage=e=>{e.data&&t("addLog",e.data)}},stopFetchLogs(){Mt.close()},stopFetchSummary(){Ct.close()}},modules:{}}),xt=r("f825"),It=r.n(xt);r("f8ce");a["default"].use(It.a),a["default"].config.productionTip=!1,new a["default"]({router:Pt,store:kt,render:t=>t(u)}).$mount("#app")},5775:function(t,e,r){"use strict";var a=r("f706"),s=r.n(a);s.a},"7ad4":function(t,e,r){"use strict";var a=r("0c3e"),s=r.n(a);e["default"]=s.a},"7c5e":function(t,e,r){},"850a":function(t,e,r){"use strict";var a=r("7c5e"),s=r.n(a);s.a},9756:function(t,e,r){"use strict";var a=r("3d2c"),s=r.n(a);s.a},9953:function(t,e,r){},ac96:function(t,e,r){"use strict";var a=r("9953"),s=r.n(a);s.a},bb51:function(t,e,r){"use strict";var a=r("470c"),s=r("7ad4"),o=(r("850a"),r("2877")),n=Object(o["a"])(s["default"],a["a"],a["b"],!1,null,"54efad41",null);e["default"]=n.exports},cf05:function(t,e,r){t.exports=r.p+"img/logo.b5357057.png"},e660:function(t,e,r){t.exports=r.p+"img/wechat.ff453262.jpg"},e74f:function(t,e,r){"use strict";var a=r("22d2"),s=r.n(a);s.a},f195:function(t,e,r){},f706:function(t,e,r){}});
//# sourceMappingURL=app.0267da57.js.map